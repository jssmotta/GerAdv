// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IOutrasPartesClienteWriter
{
    Task<FOutrasPartesCliente> WriteAsync(Models.OutrasPartesCliente outraspartescliente, int auditorQuem, MsiSqlConnection oCnn);
    Task Delete(OutrasPartesClienteResponse outraspartescliente, int operadorId, MsiSqlConnection oCnn);
}

public class OutrasPartesClienteWriter(IFOutrasPartesClienteFactory outraspartesclienteFactory) : IOutrasPartesClienteWriter
{
    private readonly IFOutrasPartesClienteFactory _outraspartesclienteFactory = outraspartesclienteFactory ?? throw new ArgumentNullException(nameof(outraspartesclienteFactory));
    public virtual async Task Delete(OutrasPartesClienteResponse outraspartescliente, int operadorId, MsiSqlConnection oCnn)
    {
        await _outraspartesclienteFactory.DeleteAsync(operadorId, outraspartescliente.Id, oCnn);
    }

    public virtual async Task<FOutrasPartesCliente> WriteAsync(Models.OutrasPartesCliente outraspartescliente, int auditorQuem, MsiSqlConnection oCnn)
    {
        using var dbRec = await (outraspartescliente.Id.IsEmptyIDNumber() ? _outraspartesclienteFactory.CreateAsync() : _outraspartesclienteFactory.CreateFromIdAsync(outraspartescliente.Id, oCnn));
        dbRec.FNome = outraspartescliente.Nome;
        dbRec.FTerceirizado = outraspartescliente.Terceirizado;
        dbRec.FClientePrincipal = outraspartescliente.ClientePrincipal;
        dbRec.FTipo = outraspartescliente.Tipo;
        dbRec.FSexo = outraspartescliente.Sexo;
        if (outraspartescliente.DtNasc != null)
            dbRec.FDtNasc = outraspartescliente.DtNasc.ToString();
        dbRec.FCPF = outraspartescliente.CPF.ClearInputCpf();
        dbRec.FRG = outraspartescliente.RG;
        dbRec.FCNPJ = outraspartescliente.CNPJ.ClearInputCnpj();
        dbRec.FInscEst = outraspartescliente.InscEst;
        dbRec.FNomeFantasia = outraspartescliente.NomeFantasia;
        dbRec.FEndereco = outraspartescliente.Endereco;
        dbRec.FCidade = outraspartescliente.Cidade;
        dbRec.FCEP = outraspartescliente.CEP.ClearInputCep();
        dbRec.FBairro = outraspartescliente.Bairro;
        dbRec.FFone = outraspartescliente.Fone;
        dbRec.FFax = outraspartescliente.Fax;
        dbRec.FEMail = outraspartescliente.EMail;
        dbRec.FSite = outraspartescliente.Site;
        dbRec.FGUID = outraspartescliente.GUID;
        dbRec.FClass = outraspartescliente.Class;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}