// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IFuncionariosWriter
{
    Task<FFuncionarios> WriteAsync(Models.Funcionarios funcionarios, int auditorQuem, MsiSqlConnection oCnn);
    Task Delete(FuncionariosResponse funcionarios, int operadorId, MsiSqlConnection oCnn);
}

public class FuncionariosWriter(IFFuncionariosFactory funcionariosFactory) : IFuncionariosWriter
{
    private readonly IFFuncionariosFactory _funcionariosFactory = funcionariosFactory ?? throw new ArgumentNullException(nameof(funcionariosFactory));
    public virtual async Task Delete(FuncionariosResponse funcionarios, int operadorId, MsiSqlConnection oCnn)
    {
        await _funcionariosFactory.DeleteAsync(operadorId, funcionarios.Id, oCnn);
    }

    public virtual async Task<FFuncionarios> WriteAsync(Models.Funcionarios funcionarios, int auditorQuem, MsiSqlConnection oCnn)
    {
        using var dbRec = await (funcionarios.Id.IsEmptyIDNumber() ? _funcionariosFactory.CreateAsync() : _funcionariosFactory.CreateFromIdAsync(funcionarios.Id, oCnn));
        dbRec.FGUID = funcionarios.GUID;
        dbRec.FEMailPro = funcionarios.EMailPro;
        dbRec.FCargo = funcionarios.Cargo;
        dbRec.FNome = funcionarios.Nome;
        dbRec.FFuncao = funcionarios.Funcao;
        dbRec.FSexo = funcionarios.Sexo;
        dbRec.FRegistro = funcionarios.Registro;
        dbRec.FCPF = funcionarios.CPF.ClearInputCpf();
        dbRec.FRG = funcionarios.RG;
        dbRec.FTipo = funcionarios.Tipo;
        dbRec.FObservacao = funcionarios.Observacao;
        dbRec.FEndereco = funcionarios.Endereco;
        dbRec.FBairro = funcionarios.Bairro;
        dbRec.FCidade = funcionarios.Cidade;
        dbRec.FCEP = funcionarios.CEP.ClearInputCep();
        dbRec.FContato = funcionarios.Contato;
        dbRec.FFax = funcionarios.Fax;
        dbRec.FFone = funcionarios.Fone;
        dbRec.FEMail = funcionarios.EMail;
        if (funcionarios.Periodo_Ini != null)
            dbRec.FPeriodo_Ini = funcionarios.Periodo_Ini.ToString();
        if (funcionarios.Periodo_Fim != null)
            dbRec.FPeriodo_Fim = funcionarios.Periodo_Fim.ToString();
        dbRec.FCTPSNumero = funcionarios.CTPSNumero;
        dbRec.FCTPSSerie = funcionarios.CTPSSerie;
        dbRec.FPIS = funcionarios.PIS;
        dbRec.FSalario = funcionarios.Salario;
        if (funcionarios.CTPSDtEmissao != null)
            dbRec.FCTPSDtEmissao = funcionarios.CTPSDtEmissao.ToString();
        if (funcionarios.DtNasc != null)
            dbRec.FDtNasc = funcionarios.DtNasc.ToString();
        dbRec.FData = funcionarios.Data;
        dbRec.FLiberaAgenda = funcionarios.LiberaAgenda;
        dbRec.FPasta = funcionarios.Pasta;
        dbRec.FClass = funcionarios.Class;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}