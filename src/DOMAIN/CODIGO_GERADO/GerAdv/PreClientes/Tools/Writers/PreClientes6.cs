// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IPreClientesWriter
{
    Task<FPreClientes> WriteAsync(Models.PreClientes preclientes, int auditorQuem, MsiSqlConnection oCnn);
    Task Delete(PreClientesResponse preclientes, int operadorId, MsiSqlConnection oCnn);
}

public class PreClientesWriter(IFPreClientesFactory preclientesFactory) : IPreClientesWriter
{
    private readonly IFPreClientesFactory _preclientesFactory = preclientesFactory;
    public async Task Delete(PreClientesResponse preclientes, int operadorId, MsiSqlConnection oCnn)
    {
        await _preclientesFactory.DeleteAsync(operadorId, preclientes.Id, oCnn);
    }

    public async Task<FPreClientes> WriteAsync(Models.PreClientes preclientes, int auditorQuem, MsiSqlConnection oCnn)
    {
        using var dbRec = await (preclientes.Id.IsEmptyIDNumber() ? _preclientesFactory.CreateAsync() : _preclientesFactory.CreateFromIdAsync(preclientes.Id, oCnn));
        dbRec.FInativo = preclientes.Inativo;
        dbRec.FQuemIndicou = preclientes.QuemIndicou;
        dbRec.FNome = preclientes.Nome;
        dbRec.FAdv = preclientes.Adv;
        dbRec.FIDRep = preclientes.IDRep;
        dbRec.FJuridica = preclientes.Juridica;
        dbRec.FNomeFantasia = preclientes.NomeFantasia;
        dbRec.FClass = preclientes.Class;
        dbRec.FTipo = preclientes.Tipo;
        if (preclientes.DtNasc != null)
            dbRec.FDtNasc = preclientes.DtNasc.ToString();
        dbRec.FInscEst = preclientes.InscEst;
        dbRec.FQualificacao = preclientes.Qualificacao;
        dbRec.FSexo = preclientes.Sexo;
        dbRec.FIdade = preclientes.Idade;
        dbRec.FCNPJ = preclientes.CNPJ.ClearInputCnpj();
        dbRec.FCPF = preclientes.CPF.ClearInputCpf();
        dbRec.FRG = preclientes.RG;
        dbRec.FTipoCaptacao = preclientes.TipoCaptacao;
        dbRec.FObservacao = preclientes.Observacao;
        dbRec.FEndereco = preclientes.Endereco;
        dbRec.FBairro = preclientes.Bairro;
        dbRec.FCidade = preclientes.Cidade;
        dbRec.FCEP = preclientes.CEP.ClearInputCep();
        dbRec.FFax = preclientes.Fax;
        dbRec.FFone = preclientes.Fone;
        dbRec.FData = preclientes.Data;
        dbRec.FHomePage = preclientes.HomePage;
        dbRec.FEMail = preclientes.EMail;
        dbRec.FAssistido = preclientes.Assistido;
        dbRec.FAssRG = preclientes.AssRG;
        dbRec.FAssCPF = preclientes.AssCPF;
        dbRec.FAssEndereco = preclientes.AssEndereco;
        dbRec.FCNH = preclientes.CNH;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}