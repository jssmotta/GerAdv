// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IContaCorrenteWriter
{
    Task<FContaCorrente> WriteAsync(Models.ContaCorrente contacorrente, int auditorQuem, MsiSqlConnection oCnn);
    Task Delete(ContaCorrenteResponse contacorrente, int operadorId, MsiSqlConnection oCnn);
}

public class ContaCorrenteWriter(IFContaCorrenteFactory contacorrenteFactory) : IContaCorrenteWriter
{
    private readonly IFContaCorrenteFactory _contacorrenteFactory = contacorrenteFactory;
    public async Task Delete(ContaCorrenteResponse contacorrente, int operadorId, MsiSqlConnection oCnn)
    {
        await _contacorrenteFactory.DeleteAsync(operadorId, contacorrente.Id, oCnn);
    }

    public async Task<FContaCorrente> WriteAsync(Models.ContaCorrente contacorrente, int auditorQuem, MsiSqlConnection oCnn)
    {
        using var dbRec = await (contacorrente.Id.IsEmptyIDNumber() ? _contacorrenteFactory.CreateAsync() : _contacorrenteFactory.CreateFromIdAsync(contacorrente.Id, oCnn));
        dbRec.FCIAcordo = contacorrente.CIAcordo;
        dbRec.FQuitado = contacorrente.Quitado;
        dbRec.FIDContrato = contacorrente.IDContrato;
        dbRec.FQuitadoID = contacorrente.QuitadoID;
        dbRec.FDebitoID = contacorrente.DebitoID;
        dbRec.FLivroCaixaID = contacorrente.LivroCaixaID;
        dbRec.FSucumbencia = contacorrente.Sucumbencia;
        dbRec.FDistRegra = contacorrente.DistRegra;
        if (contacorrente.DtOriginal != null)
            dbRec.FDtOriginal = contacorrente.DtOriginal.ToString();
        dbRec.FProcesso = contacorrente.Processo;
        dbRec.FParcelaX = contacorrente.ParcelaX;
        dbRec.FValor = contacorrente.Valor;
        dbRec.FData = contacorrente.Data;
        dbRec.FCliente = contacorrente.Cliente;
        dbRec.FHistorico = contacorrente.Historico;
        dbRec.FContrato = contacorrente.Contrato;
        dbRec.FPago = contacorrente.Pago;
        dbRec.FDistribuir = contacorrente.Distribuir;
        dbRec.FLC = contacorrente.LC;
        dbRec.FIDHTrab = contacorrente.IDHTrab;
        dbRec.FNroParcelas = contacorrente.NroParcelas;
        dbRec.FValorPrincipal = contacorrente.ValorPrincipal;
        dbRec.FParcelaPrincipalID = contacorrente.ParcelaPrincipalID;
        dbRec.FHide = contacorrente.Hide;
        if (contacorrente.DataPgto != null)
            dbRec.FDataPgto = contacorrente.DataPgto.ToString();
        dbRec.FGUID = contacorrente.GUID;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}