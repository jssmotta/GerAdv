// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IInstanciaWriter
{
    Task<FInstancia> WriteAsync(Models.Instancia instancia, int auditorQuem, MsiSqlConnection oCnn);
    Task Delete(InstanciaResponse instancia, int operadorId, MsiSqlConnection oCnn);
}

public class InstanciaWriter(IFInstanciaFactory instanciaFactory) : IInstanciaWriter
{
    private readonly IFInstanciaFactory _instanciaFactory = instanciaFactory ?? throw new ArgumentNullException(nameof(instanciaFactory));
    public virtual async Task Delete(InstanciaResponse instancia, int operadorId, MsiSqlConnection oCnn)
    {
        await _instanciaFactory.DeleteAsync(operadorId, instancia.Id, oCnn);
    }

    public virtual async Task<FInstancia> WriteAsync(Models.Instancia instancia, int auditorQuem, MsiSqlConnection oCnn)
    {
        using var dbRec = await (instancia.Id.IsEmptyIDNumber() ? _instanciaFactory.CreateAsync() : _instanciaFactory.CreateFromIdAsync(instancia.Id, oCnn));
        dbRec.FGUID = instancia.GUID;
        dbRec.FLiminarPedida = instancia.LiminarPedida;
        dbRec.FObjeto = instancia.Objeto;
        dbRec.FStatusResultado = instancia.StatusResultado;
        dbRec.FLiminarPendente = instancia.LiminarPendente;
        dbRec.FInterpusemosRecurso = instancia.InterpusemosRecurso;
        dbRec.FLiminarConcedida = instancia.LiminarConcedida;
        dbRec.FLiminarNegada = instancia.LiminarNegada;
        dbRec.FProcesso = instancia.Processo;
        dbRec.FData = instancia.Data;
        dbRec.FLiminarParcial = instancia.LiminarParcial;
        dbRec.FLiminarResultado = instancia.LiminarResultado;
        dbRec.FNroProcesso = instancia.NroProcesso;
        dbRec.FDivisao = instancia.Divisao;
        dbRec.FLiminarCliente = instancia.LiminarCliente;
        dbRec.FComarca = instancia.Comarca;
        dbRec.FSubDivisao = instancia.SubDivisao;
        dbRec.FPrincipal = instancia.Principal;
        dbRec.FAcao = instancia.Acao;
        dbRec.FForo = instancia.Foro;
        dbRec.FTipoRecurso = instancia.TipoRecurso;
        dbRec.FZKey = instancia.ZKey;
        dbRec.FZKeyQuem = instancia.ZKeyQuem;
        if (instancia.ZKeyQuando != null)
            dbRec.FZKeyQuando = instancia.ZKeyQuando.ToString();
        dbRec.FNroAntigo = instancia.NroAntigo;
        dbRec.FAccessCode = instancia.AccessCode;
        dbRec.FJulgador = instancia.Julgador;
        dbRec.FZKeyIA = instancia.ZKeyIA;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}