// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IAgendaRepetirDiasWriter
{
    Task<FAgendaRepetirDias> WriteAsync(Models.AgendaRepetirDias agendarepetirdias, MsiSqlConnection oCnn);
    Task Delete(AgendaRepetirDiasResponse agendarepetirdias, int operadorId, MsiSqlConnection oCnn);
}

public class AgendaRepetirDiasWriter(IFAgendaRepetirDiasFactory agendarepetirdiasFactory) : IAgendaRepetirDiasWriter
{
    private readonly IFAgendaRepetirDiasFactory _agendarepetirdiasFactory = agendarepetirdiasFactory;
    public async Task Delete(AgendaRepetirDiasResponse agendarepetirdias, int operadorId, MsiSqlConnection oCnn)
    {
        await _agendarepetirdiasFactory.DeleteAsync(operadorId, agendarepetirdias.Id, oCnn);
    }

    public async Task<FAgendaRepetirDias> WriteAsync(Models.AgendaRepetirDias agendarepetirdias, MsiSqlConnection oCnn)
    {
        using var dbRec = await (agendarepetirdias.Id.IsEmptyIDNumber() ? _agendarepetirdiasFactory.CreateAsync() : _agendarepetirdiasFactory.CreateFromIdAsync(agendarepetirdias.Id, oCnn));
        if (agendarepetirdias.HoraFinal != null)
            dbRec.FHoraFinal = agendarepetirdias.HoraFinal.ToString();
        dbRec.FMaster = agendarepetirdias.Master;
        dbRec.FDia = agendarepetirdias.Dia;
        if (agendarepetirdias.Hora != null)
            dbRec.FHora = agendarepetirdias.Hora.ToString();
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}