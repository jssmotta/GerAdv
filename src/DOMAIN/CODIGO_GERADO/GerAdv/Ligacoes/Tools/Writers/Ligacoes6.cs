// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface ILigacoesWriter
{
    Task<FLigacoes> WriteAsync(Models.Ligacoes ligacoes, int auditorQuem, MsiSqlConnection? oCnn);
    Task Delete(LigacoesResponse ligacoes, int operadorId, MsiSqlConnection? oCnn);
}

public class LigacoesWriter(IFLigacoesFactory ligacoesFactory) : ILigacoesWriter
{
    private readonly IFLigacoesFactory _ligacoesFactory = ligacoesFactory ?? throw new ArgumentNullException(nameof(ligacoesFactory));
    public virtual async Task Delete(LigacoesResponse ligacoes, int operadorId, MsiSqlConnection? oCnn)
    {
        await _ligacoesFactory.DeleteAsync(operadorId, ligacoes.Id, oCnn);
    }

    public virtual async Task<FLigacoes> WriteAsync(Models.Ligacoes ligacoes, int auditorQuem, MsiSqlConnection? oCnn)
    {
        using var dbRec = await (ligacoes.Id.IsEmptyIDNumber() ? _ligacoesFactory.CreateAsync() : _ligacoesFactory.CreateFromIdAsync(ligacoes.Id, oCnn));
        dbRec.FAssunto = ligacoes.Assunto;
        dbRec.FAgeClienteAvisado = ligacoes.AgeClienteAvisado;
        dbRec.FCelular = ligacoes.Celular;
        dbRec.FCliente = ligacoes.Cliente;
        dbRec.FContato = ligacoes.Contato;
        if (ligacoes.DataRealizada != null)
            dbRec.FDataRealizada = ligacoes.DataRealizada.ToString();
        dbRec.FQuemID = ligacoes.QuemID;
        dbRec.FTelefonista = ligacoes.Telefonista;
        if (ligacoes.UltimoAviso != null)
            dbRec.FUltimoAviso = ligacoes.UltimoAviso.ToString();
        dbRec.FHoraFinal = ligacoes.HoraFinal;
        dbRec.FNome = ligacoes.Nome;
        dbRec.FQuemCodigo = ligacoes.QuemCodigo;
        dbRec.FSolicitante = ligacoes.Solicitante;
        dbRec.FPara = ligacoes.Para;
        dbRec.FFone = ligacoes.Fone;
        dbRec.FRamal = ligacoes.Ramal;
        dbRec.FParticular = ligacoes.Particular;
        dbRec.FRealizada = ligacoes.Realizada;
        dbRec.FStatus = ligacoes.Status;
        dbRec.FData = ligacoes.Data;
        dbRec.FHora = ligacoes.Hora;
        dbRec.FUrgente = ligacoes.Urgente;
        dbRec.FGUID = ligacoes.GUID;
        dbRec.FLigarPara = ligacoes.LigarPara;
        dbRec.FProcesso = ligacoes.Processo;
        dbRec.FStartScreen = ligacoes.StartScreen;
        dbRec.FEmotion = ligacoes.Emotion;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}