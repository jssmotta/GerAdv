// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IAgendaWriter
{
    Task<FAgenda> WriteAsync(Models.Agenda agenda, int auditorQuem, MsiSqlConnection? oCnn);
    Task Delete(AgendaResponse agenda, int operadorId, MsiSqlConnection? oCnn);
}

public class AgendaWriter(IFAgendaFactory agendaFactory) : IAgendaWriter
{
    private readonly IFAgendaFactory _agendaFactory = agendaFactory ?? throw new ArgumentNullException(nameof(agendaFactory));
    public virtual async Task Delete(AgendaResponse agenda, int operadorId, MsiSqlConnection? oCnn)
    {
        await _agendaFactory.DeleteAsync(operadorId, agenda.Id, oCnn);
    }

    public virtual async Task<FAgenda> WriteAsync(Models.Agenda agenda, int auditorQuem, MsiSqlConnection? oCnn)
    {
        using var dbRec = await (agenda.Id.IsEmptyIDNumber() ? _agendaFactory.CreateAsync() : _agendaFactory.CreateFromIdAsync(agenda.Id, oCnn));
        dbRec.FIDCOB = agenda.IDCOB;
        dbRec.FClienteAvisado = agenda.ClienteAvisado;
        dbRec.FRevisarP2 = agenda.RevisarP2;
        dbRec.FIDNE = agenda.IDNE;
        dbRec.FCidade = agenda.Cidade;
        dbRec.FOculto = agenda.Oculto;
        dbRec.FCartaPrecatoria = agenda.CartaPrecatoria;
        dbRec.FRevisar = agenda.Revisar;
        dbRec.FHrFinal = agenda.HrFinal;
        dbRec.FAdvogado = agenda.Advogado;
        dbRec.FEventoGerador = agenda.EventoGerador;
        if (agenda.EventoData != null)
            dbRec.FEventoData = agenda.EventoData.ToString();
        dbRec.FFuncionario = agenda.Funcionario;
        dbRec.FData = agenda.Data;
        dbRec.FEventoPrazo = agenda.EventoPrazo;
        dbRec.FHora = agenda.Hora;
        dbRec.FCompromisso = agenda.Compromisso;
        dbRec.FTipoCompromisso = agenda.TipoCompromisso;
        dbRec.FCliente = agenda.Cliente;
        dbRec.FLiberado = agenda.Liberado;
        dbRec.FImportante = agenda.Importante;
        dbRec.FConcluido = agenda.Concluido;
        dbRec.FArea = agenda.Area;
        dbRec.FJustica = agenda.Justica;
        dbRec.FProcesso = agenda.Processo;
        dbRec.FIDHistorico = agenda.IDHistorico;
        dbRec.FIDInsProcesso = agenda.IDInsProcesso;
        dbRec.FUsuario = agenda.Usuario;
        dbRec.FPreposto = agenda.Preposto;
        dbRec.FQuemID = agenda.QuemID;
        dbRec.FQuemCodigo = agenda.QuemCodigo;
        dbRec.FGUID = agenda.GUID;
        dbRec.FStatus = agenda.Status;
        dbRec.FValor = agenda.Valor;
        dbRec.FDecisao = agenda.Decisao;
        dbRec.FSempre = agenda.Sempre;
        dbRec.FPrazoDias = agenda.PrazoDias;
        dbRec.FProtocoloIntegrado = agenda.ProtocoloIntegrado;
        if (agenda.DataInicioPrazo != null)
            dbRec.FDataInicioPrazo = agenda.DataInicioPrazo.ToString();
        dbRec.FUsuarioCiente = agenda.UsuarioCiente;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}