// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IAlarmSMSWriter
{
    Task<FAlarmSMS> WriteAsync(Models.AlarmSMS alarmsms, int auditorQuem, MsiSqlConnection oCnn);
    Task Delete(AlarmSMSResponse alarmsms, int operadorId, MsiSqlConnection oCnn);
}

public class AlarmSMSWriter(IFAlarmSMSFactory alarmsmsFactory) : IAlarmSMSWriter
{
    private readonly IFAlarmSMSFactory _alarmsmsFactory = alarmsmsFactory;
    public async Task Delete(AlarmSMSResponse alarmsms, int operadorId, MsiSqlConnection oCnn)
    {
        await _alarmsmsFactory.DeleteAsync(operadorId, alarmsms.Id, oCnn);
    }

    public async Task<FAlarmSMS> WriteAsync(Models.AlarmSMS alarmsms, int auditorQuem, MsiSqlConnection oCnn)
    {
        using var dbRec = await (alarmsms.Id.IsEmptyIDNumber() ? _alarmsmsFactory.CreateAsync() : _alarmsmsFactory.CreateFromIdAsync(alarmsms.Id, oCnn));
        dbRec.FDescricao = alarmsms.Descricao;
        dbRec.FHora = alarmsms.Hora;
        dbRec.FMinuto = alarmsms.Minuto;
        dbRec.FD1 = alarmsms.D1;
        dbRec.FD2 = alarmsms.D2;
        dbRec.FD3 = alarmsms.D3;
        dbRec.FD4 = alarmsms.D4;
        dbRec.FD5 = alarmsms.D5;
        dbRec.FD6 = alarmsms.D6;
        dbRec.FD7 = alarmsms.D7;
        dbRec.FEMail = alarmsms.EMail;
        dbRec.FDesativar = alarmsms.Desativar;
        if (alarmsms.Today != null)
            dbRec.FToday = alarmsms.Today.ToString();
        dbRec.FExcetoDiasFelizes = alarmsms.ExcetoDiasFelizes;
        dbRec.FDesktop = alarmsms.Desktop;
        if (alarmsms.AlertarDataHora != null)
            dbRec.FAlertarDataHora = alarmsms.AlertarDataHora.ToString();
        dbRec.FOperador = alarmsms.Operador;
        dbRec.FGuidExo = alarmsms.GuidExo;
        dbRec.FAgenda = alarmsms.Agenda;
        dbRec.FRecado = alarmsms.Recado;
        dbRec.FEmocao = alarmsms.Emocao;
        dbRec.FGUID = alarmsms.GUID;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}