// 100% auto-generated by Source Genesys Core
// copyright Â© 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
// ReSharper disable once CheckNamespace
namespace MenphisSI.SG.GerAdv;
[Serializable]
// ReSharper disable once InconsistentNaming
public partial class DBAgendaSemana : XCodeIdBase
{
#region SQLDefinition_AgendaSemana
    public const string TabelaNome = "AgendaSemana";
    public DBAgendaSemana()
    {
    }

#endregion
    public DBAgendaSemana(List<SqlParameter> parameters, in string? cNome = "", MsiSqlConnection? oCnn = null, string? fullSql = "", string sqlWhere = "", in string join = "")
    {
        // Tracking: 250605-0
        if (oCnn is null)
            return;
        if (string.IsNullOrEmpty(fullSql) && !string.IsNullOrEmpty(cNome))
        {
            if (cNome is null)
            {
                return;
            }

            sqlWhere = cNome;
        }

        if (sqlWhere.NotIsEmpty() || fullSql.NotIsEmpty())
        {
            using var ds = ConfiguracoesDBT.GetDataTable(parameters, fullSql.IsEmpty() ? $"SET NOCOUNT ON; SELECT TOP (1) {CamposSqlX} FROM {PTabelaNome.dbo(oCnn)} (NOLOCK) {join}  WHERE {sqlWhere};" : fullSql, CommandBehavior.SingleRow, oCnn);
            if (ds != null)
                CarregarDadosBd(ds.Rows.Count.IsEmptyIDNumber() ? null : ds.Rows[0]);
        }
        else
        {
            using var cmd = new SqlCommand($"SET NOCOUNT ON; SELECT TOP (1) {CamposSqlX} FROM {PTabelaNome.dbo(oCnn)} (NOLOCK) WHERE [{CampoNome}]  COLLATE SQL_Latin1_General_CP1_CI_AI  like @CampoNome", oCnn?.InnerConnection);
            cmd.Parameters.AddWithValue("@CampoNome", cNome?.trim() ?? string.Empty);
            using var ds = ConfiguracoesDBT.GetDataTable(cmd, CommandBehavior.SingleRow, oCnn);
            if (ds != null)
                CarregarDadosBd(ds.Rows.Count.IsEmptyIDNumber() ? null : ds.Rows[0]);
        }
    }

    // ReSharper disable once UnusedParameter.Local
    public DBAgendaSemana(in string? sqlWhere, MsiSqlConnection? oCnn)
    {
        using var ds = ConfiguracoesDBT.GetDataTable($"SET NOCOUNT ON; SELECT TOP (1) {CamposSqlX} FROM {PTabelaNome} (NOLOCK) WHERE {sqlWhere};", CommandBehavior.SingleRow, oCnn);
        if (ds != null)
            CarregarDadosBd(ds.Rows.Count.IsEmptyIDNumber() ? null : ds.Rows[0]);
    }

#region ListarDados_AgendaSemana
    public static IEnumerable<DBAgendaSemana> Listar(string? cSqlMain, string? cWhere, string? cOrder, string? cCnn)
    {
        using var oTCnn = ConfiguracoesDBT.GetConnection(cCnn);
        var cSql = new StringBuilder(); // checkpoint 0x3
        cSql.Append(PTabelaNome);
        if (cWhere.NotIsEmpty())
        {
            if (cWhere?.ToUpper().IndexOf(TSql.Where) == -1 && PTabelaNome.ToUpper().IndexOf(TSql.Where) == -1)
            {
                cSql.Append(TSql.Where);
            }

            cSql.Append(cWhere);
        }

        if (cOrder.NotIsEmpty())
        {
            if (!cOrder!.ToUpper().Contains(TSql.OrderBy))
                cSql.Append(TSql.OrderBy);
            cSql.Append(cOrder);
        }

        using var cmd = new SqlCommand
        {
            Connection = oTCnn?.InnerConnection,
            CommandText = ConfiguracoesDBT.CmdSql(cSql.ToString()),
            CommandTimeout = 30
        };
        var dbRec = cmd.ExecuteReader();
        while (dbRec.Read())
            yield return new DBAgendaSemana(dbRec);
    }
#endregion
}