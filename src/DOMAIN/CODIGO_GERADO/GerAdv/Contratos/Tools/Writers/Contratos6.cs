// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IContratosWriter
{
    Task<FContratos> WriteAsync(Models.Contratos contratos, int auditorQuem, MsiSqlConnection oCnn);
    Task Delete(ContratosResponse contratos, int operadorId, MsiSqlConnection oCnn);
}

public class ContratosWriter(IFContratosFactory contratosFactory) : IContratosWriter
{
    private readonly IFContratosFactory _contratosFactory = contratosFactory ?? throw new ArgumentNullException(nameof(contratosFactory));
    public virtual async Task Delete(ContratosResponse contratos, int operadorId, MsiSqlConnection oCnn)
    {
        await _contratosFactory.DeleteAsync(operadorId, contratos.Id, oCnn);
    }

    public virtual async Task<FContratos> WriteAsync(Models.Contratos contratos, int auditorQuem, MsiSqlConnection oCnn)
    {
        using var dbRec = await (contratos.Id.IsEmptyIDNumber() ? _contratosFactory.CreateAsync() : _contratosFactory.CreateFromIdAsync(contratos.Id, oCnn));
        dbRec.FProcesso = contratos.Processo;
        dbRec.FCliente = contratos.Cliente;
        dbRec.FAdvogado = contratos.Advogado;
        dbRec.FDia = contratos.Dia;
        dbRec.FValor = contratos.Valor;
        if (contratos.DataInicio != null)
            dbRec.FDataInicio = contratos.DataInicio.ToString();
        if (contratos.DataTermino != null)
            dbRec.FDataTermino = contratos.DataTermino.ToString();
        dbRec.FOcultarRelatorio = contratos.OcultarRelatorio;
        dbRec.FPercEscritorio = contratos.PercEscritorio;
        dbRec.FValorConsultoria = contratos.ValorConsultoria;
        dbRec.FGUID = contratos.GUID;
        dbRec.FTipoCobranca = contratos.TipoCobranca;
        dbRec.FProtestar = contratos.Protestar;
        dbRec.FJuros = contratos.Juros;
        dbRec.FValorRealizavel = contratos.ValorRealizavel;
        dbRec.FDOCUMENTO = contratos.DOCUMENTO;
        dbRec.FEMail1 = contratos.EMail1;
        dbRec.FEMail2 = contratos.EMail2;
        dbRec.FEMail3 = contratos.EMail3;
        dbRec.FPessoa1 = contratos.Pessoa1;
        dbRec.FPessoa2 = contratos.Pessoa2;
        dbRec.FPessoa3 = contratos.Pessoa3;
        dbRec.FOBS = contratos.OBS;
        dbRec.FClienteContrato = contratos.ClienteContrato;
        dbRec.FIdExtrangeiro = contratos.IdExtrangeiro;
        dbRec.FChaveContrato = contratos.ChaveContrato;
        dbRec.FAvulso = contratos.Avulso;
        dbRec.FSuspenso = contratos.Suspenso;
        dbRec.FMulta = contratos.Multa;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}