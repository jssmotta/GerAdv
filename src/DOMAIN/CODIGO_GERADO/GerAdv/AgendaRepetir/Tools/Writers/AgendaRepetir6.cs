// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IAgendaRepetirWriter
{
    Task<FAgendaRepetir> WriteAsync(Models.AgendaRepetir agendarepetir, int auditorQuem, MsiSqlConnection oCnn);
    Task Delete(AgendaRepetirResponse agendarepetir, int operadorId, MsiSqlConnection oCnn);
}

public class AgendaRepetirWriter(IFAgendaRepetirFactory agendarepetirFactory) : IAgendaRepetirWriter
{
    private readonly IFAgendaRepetirFactory _agendarepetirFactory = agendarepetirFactory;
    public async Task Delete(AgendaRepetirResponse agendarepetir, int operadorId, MsiSqlConnection oCnn)
    {
        await _agendarepetirFactory.DeleteAsync(operadorId, agendarepetir.Id, oCnn);
    }

    public async Task<FAgendaRepetir> WriteAsync(Models.AgendaRepetir agendarepetir, int auditorQuem, MsiSqlConnection oCnn)
    {
        using var dbRec = await (agendarepetir.Id.IsEmptyIDNumber() ? _agendarepetirFactory.CreateAsync() : _agendarepetirFactory.CreateFromIdAsync(agendarepetir.Id, oCnn));
        dbRec.FAdvogado = agendarepetir.Advogado;
        dbRec.FCliente = agendarepetir.Cliente;
        if (agendarepetir.DataFinal != null)
            dbRec.FDataFinal = agendarepetir.DataFinal.ToString();
        dbRec.FFuncionario = agendarepetir.Funcionario;
        if (agendarepetir.HoraFinal != null)
            dbRec.FHoraFinal = agendarepetir.HoraFinal.ToString();
        dbRec.FProcesso = agendarepetir.Processo;
        dbRec.FPessoal = agendarepetir.Pessoal;
        dbRec.FFrequencia = agendarepetir.Frequencia;
        dbRec.FDia = agendarepetir.Dia;
        dbRec.FMes = agendarepetir.Mes;
        if (agendarepetir.Hora != null)
            dbRec.FHora = agendarepetir.Hora.ToString();
        dbRec.FIDQuem = agendarepetir.IDQuem;
        dbRec.FIDQuem2 = agendarepetir.IDQuem2;
        dbRec.FMensagem = agendarepetir.Mensagem;
        dbRec.FIDTipo = agendarepetir.IDTipo;
        dbRec.FID1 = agendarepetir.ID1;
        dbRec.FID2 = agendarepetir.ID2;
        dbRec.FID3 = agendarepetir.ID3;
        dbRec.FID4 = agendarepetir.ID4;
        dbRec.FSegunda = agendarepetir.Segunda;
        dbRec.FQuarta = agendarepetir.Quarta;
        dbRec.FQuinta = agendarepetir.Quinta;
        dbRec.FSexta = agendarepetir.Sexta;
        dbRec.FSabado = agendarepetir.Sabado;
        dbRec.FDomingo = agendarepetir.Domingo;
        dbRec.FTerca = agendarepetir.Terca;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}