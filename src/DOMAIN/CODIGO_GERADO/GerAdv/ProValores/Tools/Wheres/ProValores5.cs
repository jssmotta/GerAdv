// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Wheres;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IProValoresWhere
{
    ProValoresResponse Read(string where, List<SqlParameter> parameters, MsiSqlConnection oCnn);
}

public partial class ProValoresWhere(IFProValoresFactory provaloresFactory) : IProValoresWhere
{
    private readonly IFProValoresFactory _provaloresFactory = provaloresFactory ?? throw new ArgumentNullException(nameof(provaloresFactory));
    public ProValoresResponse Read(string where, List<SqlParameter> parameters, MsiSqlConnection oCnn)
    {
        using var dbRec = _provaloresFactory.CreateFromParameters(parameters, oCnn, sqlWhere: where);
        var provalores = new ProValoresResponse
        {
            Id = dbRec.ID,
            Processo = dbRec.FProcesso,
            TipoValorProcesso = dbRec.FTipoValorProcesso,
            Indice = dbRec.FIndice ?? string.Empty,
            Ignorar = dbRec.FIgnorar,
            Data = dbRec.FData ?? string.Empty,
            ValorOriginal = dbRec.FValorOriginal,
            PercMulta = dbRec.FPercMulta,
            ValorMulta = dbRec.FValorMulta,
            PercJuros = dbRec.FPercJuros,
            ValorOriginalCorrigidoIndice = dbRec.FValorOriginalCorrigidoIndice,
            ValorMultaCorrigido = dbRec.FValorMultaCorrigido,
            ValorJurosCorrigido = dbRec.FValorJurosCorrigido,
            ValorFinal = dbRec.FValorFinal,
            Guid = dbRec.FGuid ?? string.Empty,
        };
        if (DateTime.TryParse(dbRec.FDataUltimaCorrecao, out DateTime XDataUltimaCorrecao))
        {
            provalores.DataUltimaCorrecao = dbRec.FDataUltimaCorrecao;
            provalores.DataUltimaCorrecao_date = XDataUltimaCorrecao;
        }

        return provalores;
    }
}