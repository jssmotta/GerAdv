// 100% auto-generated by Source Genesys WebApi Front & Back Creator
// copyright © 2000-2025 Menphis - Sistemas Inteligentes
// This file is part of the Source Genesys project                     
#pragma warning disable IDE0130 // Namespace does not match folder structure

namespace MenphisSI.GerAdv.Writers;
#pragma warning restore IDE0130 // Namespace does not match folder structure

public partial interface IEnderecosWriter
{
    Task<FEnderecos> WriteAsync(Models.Enderecos enderecos, int auditorQuem, MsiSqlConnection oCnn);
    Task Delete(EnderecosResponse enderecos, int operadorId, MsiSqlConnection oCnn);
}

public class EnderecosWriter(IFEnderecosFactory enderecosFactory) : IEnderecosWriter
{
    private readonly IFEnderecosFactory _enderecosFactory = enderecosFactory ?? throw new ArgumentNullException(nameof(enderecosFactory));
    public virtual async Task Delete(EnderecosResponse enderecos, int operadorId, MsiSqlConnection oCnn)
    {
        await _enderecosFactory.DeleteAsync(operadorId, enderecos.Id, oCnn);
    }

    public virtual async Task<FEnderecos> WriteAsync(Models.Enderecos enderecos, int auditorQuem, MsiSqlConnection oCnn)
    {
        using var dbRec = await (enderecos.Id.IsEmptyIDNumber() ? _enderecosFactory.CreateAsync() : _enderecosFactory.CreateFromIdAsync(enderecos.Id, oCnn));
        dbRec.FTopIndex = enderecos.TopIndex;
        dbRec.FGUID = enderecos.GUID;
        dbRec.FDescricao = enderecos.Descricao;
        dbRec.FContato = enderecos.Contato;
        if (enderecos.DtNasc != null)
            dbRec.FDtNasc = enderecos.DtNasc.ToString();
        dbRec.FEndereco = enderecos.Endereco;
        dbRec.FBairro = enderecos.Bairro;
        dbRec.FPrivativo = enderecos.Privativo;
        dbRec.FAddContato = enderecos.AddContato;
        dbRec.FCEP = enderecos.CEP.ClearInputCep();
        dbRec.FOAB = enderecos.OAB;
        dbRec.FOBS = enderecos.OBS;
        dbRec.FFone = enderecos.Fone;
        dbRec.FFax = enderecos.Fax;
        dbRec.FTratamento = enderecos.Tratamento;
        dbRec.FCidade = enderecos.Cidade;
        dbRec.FSite = enderecos.Site;
        dbRec.FEMail = enderecos.EMail;
        dbRec.FQuem = enderecos.Quem;
        dbRec.FQuemIndicou = enderecos.QuemIndicou;
        dbRec.FReportECBOnly = enderecos.ReportECBOnly;
        dbRec.AuditorQuem = auditorQuem;
        await dbRec.UpdateAsync(oCnn);
        return dbRec;
    }
}